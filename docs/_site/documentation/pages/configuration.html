<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuration - </title>
    <link rel="stylesheet" href="/documentation/assets/css/style.css">
</head>
<body>
    <header>
    <div class="wrapper">
        <div class="header-content">
            <h1><a href="/"></a></h1>
            <nav>
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="/documentation/pages/commands/">Commands</a></li>
                    <li><a href="/documentation/pages/setup/">Setup</a></li>
                    <li><a href="/documentation/pages/configuration/">Configuration</a></li>
                    <li><a href="/documentation/pages/development/">Development</a></li>
                </ul>
            </nav>
        </div>
    </div>
</header>
    
    <main class="content">
        <h1 id="bot-configuration">Bot Configuration</h1>

<p>This guide explains how to configure the bot for your server. The bot uses environment variables and MongoDB for configuration management.</p>

<h2 id="environment-variables">Environment Variables</h2>

<p>Create a <code class="language-plaintext highlighter-rouge">.env</code> file in your bot’s root directory with the following variables:</p>

<pre><code class="language-env"># Required Variables
BOT_TOKEN=your_discord_bot_token
CLIENT_ID=your_client_id

# Optional Variables
PREFIX=your_preferred_prefix
NODE_ENV=development

# MongoDB Configuration
MONGODB_URI=your_mongodb_connection_string
MONGODB_SSL_CA=path_to_ssl_ca_file
MONGODB_SSL_CERT=path_to_ssl_cert_file
</code></pre>

<h3 id="required-variables">Required Variables</h3>

<table>
  <thead>
    <tr>
      <th>Variable</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">BOT_TOKEN</code></td>
      <td>Your Discord bot token from the Discord Developer Portal</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">CLIENT_ID</code></td>
      <td>Your bot’s application ID from the Discord Developer Portal</td>
    </tr>
  </tbody>
</table>

<h3 id="optional-variables">Optional Variables</h3>

<table>
  <thead>
    <tr>
      <th>Variable</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">PREFIX</code></td>
      <td>Command prefix for the bot</td>
      <td>””</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">NODE_ENV</code></td>
      <td>Environment setting (development/production)</td>
      <td>“development”</td>
    </tr>
  </tbody>
</table>

<h3 id="database-configuration">Database Configuration</h3>

<table>
  <thead>
    <tr>
      <th>Variable</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MONGODB_URI</code></td>
      <td>MongoDB connection string</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MONGODB_SSL_CA</code></td>
      <td>Path to SSL CA file (if using SSL)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MONGODB_SSL_CERT</code></td>
      <td>Path to SSL certificate file (if using SSL)</td>
    </tr>
  </tbody>
</table>

<h2 id="database-models">Database Models</h2>

<h3 id="role-menu-configuration">Role Menu Configuration</h3>

<p>The bot stores role menu configurations in MongoDB with the following schema:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">guildId</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>     <span class="c1">// Discord server ID</span>
    <span class="nx">channelId</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>   <span class="c1">// Channel where menu is posted</span>
    <span class="nx">messageId</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>   <span class="c1">// Message ID of the menu</span>
    <span class="nx">roles</span><span class="p">:</span> <span class="p">[</span><span class="nb">String</span><span class="p">]</span>      <span class="c1">// Array of role IDs</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="feedback-storage">Feedback Storage</h3>

<p>Feedback submissions are stored with the following schema:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">userId</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>      <span class="c1">// User who submitted feedback</span>
    <span class="nx">title</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>       <span class="c1">// Feedback title</span>
    <span class="nx">feedback</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>    <span class="c1">// Feedback content</span>
    <span class="nx">createdAt</span><span class="p">:</span> <span class="nb">Date</span><span class="p">,</span>     <span class="c1">// Submission timestamp</span>
    <span class="nx">updatedAt</span><span class="p">:</span> <span class="nb">Date</span>      <span class="c1">// Last update timestamp</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="cache-configuration">Cache Configuration</h2>

<p>The bot uses an in-memory cache system with the following default settings:</p>

<ul>
  <li>Default TTL: 300 seconds (5 minutes)</li>
  <li>Check period: 60 seconds</li>
  <li>No cloning of stored objects</li>
</ul>

<p>Cache settings can be modified in <code class="language-plaintext highlighter-rouge">src/services/CacheService.js</code>.</p>

<h2 id="logging-configuration">Logging Configuration</h2>

<p>The bot uses Winston for logging with the following configurations:</p>

<h3 id="log-levels">Log Levels</h3>

<ul>
  <li>Production: <code class="language-plaintext highlighter-rouge">info</code> and above</li>
  <li>Development: <code class="language-plaintext highlighter-rouge">debug</code> and above</li>
</ul>

<h3 id="log-files">Log Files</h3>

<p>Logs are stored in the <code class="language-plaintext highlighter-rouge">logs</code> directory:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">combined.log</code>: All logs</li>
  <li><code class="language-plaintext highlighter-rouge">error.log</code>: Error-level logs only</li>
  <li><code class="language-plaintext highlighter-rouge">exceptions.log</code>: Unhandled exceptions</li>
</ul>

<p>Each log file has:</p>
<ul>
  <li>Maximum size: 10MB</li>
  <li>Maximum files: 5 (rotation)</li>
</ul>

<h2 id="security-considerations">Security Considerations</h2>

<ol>
  <li>Keep your <code class="language-plaintext highlighter-rouge">.env</code> file secure and never commit it to version control</li>
  <li>Use strong MongoDB credentials</li>
  <li>Enable SSL for database connections in production</li>
  <li>Set appropriate file permissions for log files</li>
  <li>Regularly rotate log files and monitor disk usage</li>
</ol>

<h2 id="development-configuration">Development Configuration</h2>

<p>When running in development mode:</p>
<ul>
  <li>More verbose logging is enabled</li>
  <li>Cache duration may be reduced</li>
  <li>Additional debugging information is available</li>
</ul>

<h2 id="production-configuration">Production Configuration</h2>

<p>For production deployments:</p>
<ol>
  <li>Set <code class="language-plaintext highlighter-rouge">NODE_ENV=production</code></li>
  <li>Enable SSL for MongoDB connection</li>
  <li>Configure proper log rotation</li>
  <li>Use a process manager like PM2</li>
  <li>Set up monitoring and alerting</li>
</ol>

<h2 id="troubleshooting">Troubleshooting</h2>

<p>Common configuration issues and solutions:</p>

<ol>
  <li><strong>Bot Won’t Start</strong>
    <ul>
      <li>Verify all required environment variables are set</li>
      <li>Check MongoDB connection string</li>
      <li>Ensure bot token is valid</li>
    </ul>
  </li>
  <li><strong>Database Connection Issues</strong>
    <ul>
      <li>Verify MongoDB is running</li>
      <li>Check network connectivity</li>
      <li>Validate SSL certificates if using SSL</li>
    </ul>
  </li>
  <li><strong>Logging Issues</strong>
    <ul>
      <li>Ensure write permissions for logs directory</li>
      <li>Check available disk space</li>
      <li>Verify log rotation settings</li>
    </ul>
  </li>
</ol>

<h2 id="update-configuration">Update Configuration</h2>

<p>To update the bot’s configuration:</p>
<ol>
  <li>Stop the bot</li>
  <li>Modify environment variables or database settings</li>
  <li>Restart the bot to apply changes</li>
</ol>

<p>Configuration changes requiring a restart:</p>
<ul>
  <li>Environment variables</li>
  <li>Database connection settings</li>
  <li>Logging configuration</li>
</ul>

    </main>

    <footer>
    <div class="wrapper">
        <p>&copy; 2025 . All rights reserved.</p>
    </div>
</footer>
</body>
</html>